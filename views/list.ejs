<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To do List</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>

    <div class="l-grid">
        <% listCollection.forEach(function(li){ %>
            <div class="l-item">
                <div class="box" id="heading">
                    <h1><a href="<%= 'http://localhost:3000/'+li.name+'/open' %>"><%= li.name %></a></h1>
                    <form class="item" id="l-del-form" action="/deleteList" method="post">
                        <button class="l-del" type="submit" name="listDel" value="<%= li.name %>" >-</button>
                    </form>
                </div>
            
                <div class="box">
            
                        <% li.items.forEach(function(el){ %>
            
                            <!-- Route to delete items -->
                            <form action="/delete" method="post">
                                
                                <div class="item">
                                    <input type="checkbox" name="id_checked" value="<%= el._id %>" onchange="this.form.submit()"> <!-- To submit when checkbox is toggled -->
                                    <input type="hidden" name="listName_checked" value="<%= li.name %>">
                                    <p><%= el.task %></p>
                                </div>
                            
                            </form>
                        <% }) %>
                    
                        <!-- Route to add new items -->
                        <form class="item-add" action="/" method="post">
                            <input type="text" name="newTask" placeholder="New Task" autocomplete="off">
                            <button type="submit" name="listBtn" value="<%= li.name %>" >+</button>
                        </form>        
                </div>
            </div>
        <% }) %>
    </div>

</body>
</html>
